Pour pouvoir mettre Ã  jour le firmware, il faut modifier la version dans le fichier. Json si elle est supÃ©rieure et qu'il y a bien le fichier firmware.bin dans ce mÃªme dossier alors la mise Ã  jour OTA se fera lors de la prochaine prise de mesure (si deep sleep) ou directement si le mode maintenance a Ã©tÃ© activÃ© dans le dashboard, ou alors se fera aprÃ¨s un reset du capteur.

Librairies requises (firmware Cuves & Barriques) :

- ESP32 Core .................. v3.3.3
- ArduinoJson ................. v7.4.2
- WiFiManager ................. v2.0.17
- TFmini ...................... v0.1.0 (cuves uniquement)

MÃ©thode de travail pour mettre Ã  jour le finmware 

1. Cas actuel : tu bosses sur Arduino + PC, puis tu veux mettre Codespaces Ã  jour
Sur le PC (Arduino + GitHub Desktop)
Tu modifies ton .ino dans Arduino.
Tu testes, tu es content.
Dans GitHub Desktop :
Tu vois les changements â†’ Commit to main
Puis Push origin
ğŸ‘‰ Ã€ ce moment-lÃ , GitHub.com est Ã  jour (1.0.6, 1.0.7, etc.)
Sur Codespaces
Tu ouvres ton repo dans Codespaces.
Sâ€™il y a des changements locaux parasites (icÃ´ne â€œValiderâ€ bleue, fichiers marquÃ©s comme modifiÃ©s) :
Menu ContrÃ´le de code source â†’ â€¦ â†’ Ignorer toutes les modifications
(pour repartir sur un workspace propre)
Ensuite :
Menu Tirer / envoyer â†’ Tirer (ou Synchroniser)
ğŸ‘‰ Codespaces se met Ã  jour avec ce quâ€™il y a sur GitHub.com.
âœ… Donc ta mÃ©moire :
â€œQuand jâ€™ai bossÃ© sur Arduino + GitHub Desktop, pour mettre Codespaces Ã  jour :
Ignorer toutes les modifications â†’ Pullâ€
Câ€™est exactement Ã§a, mais seulement si Codespaces avait des changements non commit.
Si Codespaces nâ€™a rien de modifiÃ©, un simple Pull/Synchroniser suffit.

2. Cas inverse : tu bosses sur Codespaces, puis tu veux remettre ton PC/Arduino Ã  jour
Câ€™est ce qui va arriver quand tu feras surtout les modifs dans Codespaces depuis la tablette.
Sur Codespaces
Tu modifies ton .ino (par exemple tu passes Ã  1.0.7).
Dans la vue ContrÃ´le de code source :
Tu fais Commit sur main.
Puis tu fais Push (Tirer / envoyer â†’ Envoyer / Push ou Synchroniser).
ğŸ‘‰ LÃ  encore, GitHub.com est Ã  jour.
Sur ton PC (GitHub Desktop + Arduino)
Tu ouvres GitHub Desktop.
En haut, il va te proposer un Pull (ou â€œFetch originâ€ puis â€œPullâ€).
Tu fais Pull.
Ton dossier local sur le PC est maintenant Ã  jour (tu verras FW_VERSION "1.0.7" dans Arduino).
âš ï¸ Important :
Si tu nâ€™as fait AUCUNE modif locale sur le PC â†’ un simple Pull dans GitHub Desktop, et câ€™est bon.
Si tu avais commencÃ© Ã  bricoler des trucs non commit sur le PC, lÃ  aussi, il faudrait :
soit commit ce que tu as fait,
soit discard/ignorer les changements locaux avant de pull.

3. En pratique, pour toi
Vu ta maniÃ¨re de bosser, tu peux te fixer une rÃ¨gle simple :
Quand tu travailles sur PC + Arduino :
Tu considÃ¨res ce PC comme la â€œsourceâ€, tu commits + push depuis GitHub Desktop.
Puis tu â€œrattrapesâ€ Codespaces avec Pull (en ayant nettoyÃ© les changements non commit).
Quand tu travailles sur Codespaces (tablette) :
Tu commits + push dans Codespaces.
Puis sur le PC, dans GitHub Desktop, tu fais un Pull pour remettre Arduino Ã  jour.
ğŸ‘‰ Le centre de vÃ©ritÃ©, câ€™est toujours GitHub.com (le remote).
PC et Codespaces sont juste deux copies qui doivent rÃ©guliÃ¨rement pull pour rester synchro.

Reste Ã  savoir comment obtenir un .Bin avec github code space Ã  partir du fichier ino
arduino-cli compile --fqbn esp32:esp32:esp32c3 \
  --output-dir build-barrique \
  sketch_dec5a8TESTESPC3

Ensuite il suffit juste de mettre le fichier firmware.bin avec le panneau d'administration infomaniak en cliquant sur Web hÃ©bergement puis sur l'hÃ©bergement puis FTP menu, 
L'application Android x-plore et aussi excellente pour faire les transferts au serveur avec la tablette en toute simplicitÃ©.
